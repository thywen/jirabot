# p7bot

p7bot is a chat bot built on the [Hubot][hubot] framework. It was
initially generated by [generator-hubot][generator-hubot], and configured to be
deployed on [Heroku][heroku] to get you up and running as quick as possible.

### Running p7bot Locally

You can test your hubot by running the following, however some plugins will not
behave as expected unless the [environment variables](#configuration) they rely
upon have been set.

You can start p7bot locally by running:

    % bin/hubot

You'll see some start up output and a prompt:

    [Sat Feb 28 2015 12:38:27 GMT+0000 (GMT)] INFO Using default redis on localhost:6379
    p7-infobot>

Then you can interact with p7-infobot by typing `p7-infobot help`.

    p7-infobot> p7-infobot help
    p7-infobot animate me <query> - The same thing as `image me`, except adds [snip]
    p7-infobot help - Displays all of the help commands that p7-infobot knows about.
    ...

### Configuration

The P7 Bot needs to function the following Variables set in Heroku:

* HUBOT_JIRA_PREFIX = The URL of the jira instance
* HUBOT_STORY_PREFIX = The prefix for the stories
* HUBOT_JIRA_CHANNEL = The channel where to post the new story
* HUBOT_SLACK_TOKEN = The token of the Slackbot in the Slack channel


### Deploy

#### Automatic
The deployment happens automatically with a push on the github master.

#### Manual
Just push your changes to heroku with

    git push heroku master


### functionality

Karma:
The bot can handle karma with reason ie p7bot @someone++ for helping a lot or trains-- for being always too late

    <botname> someone++ <reason>
    <botname> someone-- <reason>

To request the karma list, you can write top and bottom with a number

    <botname> top 10
    <botname> bottom 10

To announce a new story just write the following and the story will be promoted

    new story 1234
